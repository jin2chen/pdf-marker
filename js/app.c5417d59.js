(function(e){function t(t){for(var s,r,o=t[0],c=t[1],p=t[2],l=0,d=[];l<o.length;l++)r=o[l],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);h&&h(t);while(d.length)d.shift()();return n.push.apply(n,p||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],s=!0,r=1;r<a.length;r++){var c=a[r];0!==i[c]&&(s=!1)}s&&(n.splice(t--,1),e=o(o.s=a[0]))}return e}var s={},i={app:0},n=[];function r(e){return o.p+"js/"+({pdfjsWorker:"pdfjsWorker"}[e]||e)+"."+{pdfjsWorker:"4c52183d"}[e]+".js"}function o(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(e){var t=[],a=i[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((function(t,s){a=i[e]=[t,s]}));t.push(a[2]=s);var n,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=r(e);var p=new Error;n=function(t){c.onerror=c.onload=null,clearTimeout(l);var a=i[e];if(0!==a){if(a){var s=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+s+": "+n+")",p.name="ChunkLoadError",p.type=s,p.request=n,a[1](p)}i[e]=void 0}};var l=setTimeout((function(){n({type:"timeout",target:c})}),12e4);c.onerror=c.onload=n,document.head.appendChild(c)}return Promise.all(t)},o.m=e,o.c=s,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/pdf-marker/",o.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],p=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var h=p;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},1:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},"40a2":function(e,t,a){},5:function(e,t){},"50ce":function(e,t,a){"use strict";var s=a("57b0"),i=a.n(s);i.a},"55b5":function(e,t,a){"use strict";var s=a("9cf4"),i=a.n(s);i.a},"56d7":function(e,t,a){"use strict";a.r(t);a("9a26");var s=a("2b0e"),i=a("4eb5"),n=a.n(i),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"inspire"}},[a("v-navigation-drawer",{attrs:{app:"",permanent:"",clipped:"",width:"25%"}},[a("outline")],1),a("v-app-bar",{attrs:{app:"","clipped-left":""}},[a("v-toolbar-title",[e._v("PDF MARK TOOL")]),a("v-spacer"),a("import"),a("v-btn",{attrs:{icon:""},on:{click:function(t){e.exportCount++}}},[a("v-icon",[e._v("mdi-file-export")])],1),a("span",[e._v(e._s(e.filename))])],1),a("v-content",[a("v-container",{staticStyle:{height:"100%","padding-top":"0","padding-bottom":"0"},attrs:{fluid:""}},[a("v-row",{staticClass:"fill-height",attrs:{align:"stretch",justify:"center"}},[a("v-col",[a("viewer")],1)],1)],1)],1)],1)},o=[],c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"viewerContainer",class:{overflow:e.isRendering},attrs:{id:"viewerContainer"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isRendering,expression:"isRendering"}],staticClass:"pdfViewer"}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isUploaded,expression:"isUploaded"}],staticClass:"pdfViewer"},e._l(e.pages,(function(e){return a("rect-canvas",{key:e.id,attrs:{page:e,pid:e.id}})})),1),e.isUploaded?e._e():a("uploader",{on:{"pdf-loaded":function(t){return e.onPdfLoaded(t)}}}),e.isRendering?a("full-loading"):e._e()],1)},p=[],l=(a("73d9"),a("5319"),a("ddb0"),a("21a6")),h=a.n(l),d=a("7a94"),u=a("fba4"),v=a.n(u),f=a("968b");let g=null;class b extends f["PDFViewer"]{static instance(...e){return g||(g=new b(...e)),g}constructor(...e){super(...e),this.pagesRenderedCount=0,this._bindEvents()}load(...e){return v.a.getDocument(...e).promise.then(e=>{this.setDocument(e)})}collect(){const e=[];if(this.pagesRenderedCount<this.pagesCount)return e;this.pagesRenderedCount=0;for(let t=0;t<this.pagesCount;++t){let a=this.getPageView(t),s=JSON.stringify({id:a.id,viewport:a.viewport,outputScale:a.outputScale,dataUrl:a.canvas.toDataURL(),sections:[]});e.push(JSON.parse(s)),a.destroy()}return e}_bindEvents(){this.eventBus.on("pagesinit",this._onPageInit.bind(this)),this.eventBus.on("pagesloaded",this._onPagesLoaded.bind(this)),this.eventBus.on("pagerendered",this._onPageRendered.bind(this))}_onPageInit(e){}_onPagesLoaded(e){for(let t=0;t<this.pagesCount;++t){let e=this.getPageView(t);e.onBeforeDraw=()=>0,0===e.renderingState&&(e.renderingQueue=null,e.draw())}}_onPageRendered(e){let t=e.source,{canvas:a,outputScale:s}=t;a.toDataURL("image/png");this.pagesRenderedCount++,this.pagesRenderedCount>=this.pagesCount&&this.eventBus.dispatch("pagesRenderCompleted")}_scrollUpdate(){}_resetView(){super._resetView(),this.pagesRenderedCount=0}}var m=b,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page",style:{width:e.viewport.width+"px",height:e.viewport.height+"px"}},[a("canvas",{ref:"canvas",style:{width:e.viewport.width+"px",height:e.viewport.height+"px","outline-style":"none"}})])},y=[];const E=Object.freeze({TEXT:"text",CHECKBOX:"checkbox",SIGNATURE:"signature",NORMAL:"normal"}),x=Object.freeze({SIGNATURE:"signature",DATE:"date"}),C=Object.freeze({SIGNATURE:40,DATE:13}),O=e=>{return JSON.parse(JSON.stringify(e))};class T{constructor(e,t,a=null){this.canvas=e,this.fabric=t,this.isDrawing=!1,this.origX=0,this.origY=0,this.activeObj=null,this.clipboard=null,this.vm=a,this.selected=null,this.bindEvents()}drawTags(e){this.canvas.remove(...this.canvas.getObjects()),e.forEach(e=>{e=O(e);const t=new this.fabric.Rect({left:e.left,top:e.top,width:e.width,height:e.height,stroke:"red",strokeWidth:1,strokeUniform:!0,fill:"transparent"});this.setCoords(t),t.shape=e,this.canvas.add(t)})}shapes(){return this.canvas.getObjects().map(e=>e.shape)}setShape(e){this.selected&&(this.selected.shape=O(e),this.canvas.requestRenderAll())}setCoords(e){e.set({cornerSize:4,cornerColor:"green",transparentCorners:!0,hasRotatingPoint:!1}),e.setCoords()}discardActiveObject(){this.canvas.discardActiveObject(),this.canvas.requestRenderAll()}setRectangle(e=null){this.selected=e,this.vm&&this.vm.setShape(e?e.shape:{})}bindEvents(){this.map;this.canvas.on("mouse:down",this.onMouseDown.bind(this)),this.canvas.on("mouse:move",this.onMouseMove.bind(this)),this.canvas.on("mouse:up",this.onMouseUp.bind(this)),this.canvas.on("selection:updated",e=>{e.target&&"activeSelection"===e.target.type&&this.setCoords(e.target)}),"object:moving,object:scaling,object:rotating,object:skewing,object:moved,object:scaled,object:rotated,object:skewed".split(",").forEach(e=>{this.canvas.on(e,e=>this.disable())}),this.canvas.upperCanvasEl.tabIndex=-1,this.canvas.upperCanvasEl.addEventListener("keydown",e=>{const t=(e,t,a)=>{const s=this.canvas.getActiveObject();s&&(s.set({[e]:s[e]+t}),this.canvas.requestRenderAll(),this.setRectangle(s),a.stopPropagation(),a.preventDefault())};"Backspace"===e.key?(this.canvas.getActiveObjects().forEach(e=>this.canvas.remove(e)),this.canvas.discardActiveObject()):"d"===e.key?this.duplicate():"ArrowUp"===e.key?t("top",-1,e):"ArrowDown"===e.key?t("top",1,e):"ArrowLeft"===e.key?t("left",-1,e):"ArrowRight"===e.key&&t("left",1,e)},!1)}onMouseDown(e){this.enable();let t=this.canvas.getPointer(e.e);this.origX=t.x,this.origY=t.y,this.activeObj=new this.fabric.Rect({left:this.origX,top:this.origY,width:t.x-this.origX,height:t.y-this.origY,stroke:"red",strokeWidth:1,strokeUniform:!0,fill:"transparent"}),this.setCoords(this.activeObj),this.canvas.add(this.activeObj)}onMouseMove(e){if(!this.isEnable())return;let t=this.canvas.getPointer(e.e),a=this.activeObj;t.x=Math.max(0,t.x),t.y=Math.max(0,t.y),this.origX>t.x&&a.set({left:Math.abs(t.x)}),this.origY>t.y&&a.set({top:Math.abs(t.y)}),a.set({width:Math.abs(this.origX-t.x)}),a.set({height:Math.abs(this.origY-t.y)}),a.setCoords(),this.canvas.requestRenderAll()}onMouseUp(e){this.disable();let t=this.activeObj;t&&(t.width<5||t.height<5?(this.canvas.remove(t),this.activeObj=null):(this.canvas.setActiveObject(t),this.canvas.requestRenderAll(),this.activeObj=null)),t=this.canvas.getActiveObject(),t?"activeSelection"===t.type?(t.forEachObject(e=>{this.tidy(e)}),this.setRectangle(null)):(this.tidy(t),this.setRectangle(t)):this.setRectangle(null)}isEnable(){return this.isDrawing}enable(){this.isDrawing=!0}disable(){this.isDrawing=!1}tidy(e){let{width:t,height:a,scaleX:s,scaleY:i}=e;e.set({scaleX:1,scaleY:1,width:Math.round(t*s),height:Math.round(a*i)}),e.setCoords(),this.canvas.requestRenderAll()}bindObjectEvents(e){return e.on("moving",e=>{let{target:t}=e,{left:a,top:s,width:i,height:n}=t,{width:r,height:o}=t.canvas;a=Math.max(a,0),s=Math.max(s,0),a=Math.min(a,r-i-2),s=Math.min(s,o-n-2),t.set({left:a,top:s}),t.setCoords(),this.setRectangle(e.target)}),e}duplicate(){const e=this.canvas.getActiveObject();e&&e.clone(t=>{if(this.canvas.discardActiveObject(),t.set({left:t.left+10,top:t.top+10,evented:!0}),this.setCoords(t),"activeSelection"===t.type)t.canvas=this.canvas,t.forEachObject(e=>{this.canvas.add(e),this.setCoords(e)}),t.setCoords();else{const a=O(e.shape);t.shape=a,this.canvas.add(t)}t.top+=10,t.left+=10,t.setCoords(),this.canvas.setActiveObject(t),this.canvas.requestRenderAll()})}}var j=T;const _=e=>{return JSON.parse(JSON.stringify(e))},A=(e,t,a)=>{return e.pid=a,e.viewport=t,e.section&&""!==e.section.trim()||(e.section="sec".concat(a)),["left","top","width","height"].forEach(t=>{void 0!==e[t]&&(e[t]=Math.round(e[t]))}),e},R=(e,t,a,s)=>{const i=_(e),{area:n}=i,{scale:r}=a;return["area"].forEach(e=>delete i[e]),n.w=n.w<=0?10:n.w,n.h=n.h<=0?10:n.h,["x","y","w","h"].forEach(e=>n[e]=Number.parseFloat(n[e])),e.type===E.SIGNATURE&&(e.signatureType===x.DATE?n.y=n.y-n.h+C.DATE:e.signatureType===x.SIGNATURE&&(n.y=n.y-n.h+C.SIGNATURE*Number.parseFloat(e.scaleValue)),n.y+=20),Object.assign(i,{section:t,left:Math.round(n.x*r),top:Math.round(n.y*r),width:Math.round(n.w*r),height:Math.round(n.h*r)}),[E.TEXT,E.CHECKBOX].includes(i.type)&&(i.top=Math.round(a.height-(n.y+n.h)*r)),A(i,a,s)},S=e=>{let t=_(e);const{left:a,top:s,width:i,height:n,viewport:r,section:o}=t,c=r.scale;return["left","top","width","height","pid","viewport"].forEach(e=>delete t[e]),t=Object.assign(t,{type:t.type.toLowerCase(),area:{x:Math.round(a/c),y:Math.round(s/c),w:Math.round(i/c),h:Math.round(n/c)}}),[E.TEXT,E.CHECKBOX].includes(t.type)&&(t.area.y=Math.round((r.height-s-n)/c)),t.type===E.TEXT?["value","signatureType","scaleValue"].forEach(e=>delete t[e]):t.type===E.CHECKBOX?["signatureType","scaleValue"].forEach(e=>delete t[e]):t.type===E.SIGNATURE&&["value"].forEach(e=>delete t[e]),t.type===E.SIGNATURE&&(t.signatureType===x.DATE?t.area.y=t.area.y+t.area.h-C.DATE:t.signatureType===x.SIGNATURE&&(t.area.y=t.area.y+t.area.h-C.SIGNATURE*t.scaleValue),t.area.y-=20),t},$=e=>{const t=[];if(e.type===E.CHECKBOX){const a=_(e);delete a["areas"],Object.entries(e.areas).forEach(e=>{const s=_(a),[i,n]=e;t.push(Object.assign(s,{area:n,value:i}))})}else t.push(e);return t};var k={simpleClone:_,tidyShape:A,tag2shape:R,shape2tag:S,flatCheckbox:$},N={name:"RectCanvas",props:["page"],created(){this.app=this.$root.app(),this.shape=null,this.rectangle=null,this.viewport=this.page.viewport,this.outputScale=this.page.outputScale,this.pid=this.page.id,this.watch()},mounted(){const{viewport:e,outputScale:t}=this,a=new d["fabric"].Canvas(this.$refs.canvas,{width:e.width,height:e.height});a.setBackgroundImage(this.page.dataUrl,a.renderAll.bind(a),{scaleX:1/t.sx,scaleY:1/t.sy}),this.rectangle=new j(a,d["fabric"],this)},methods:{watch(){this.$watch("app.shape",this.watchAppShape,{deep:!0}),this.$watch("page.sections",this.watchPageSections,{deep:!1})},watchAppShape(e,t){Object.keys(e).length<=0||(e.pid===this.pid?this.rectangle.setShape(e):this.rectangle.discardActiveObject())},watchPageSections(e,t){const a=k.simpleClone(e).flatMap(e=>{const[t,a]=e;return a.flatMap(k.flatCheckbox).map(e=>{return k.tag2shape(e,t,this.viewport,this.pid)})});this.rectangle.drawTags(a)},setShape(e){e=e||{},e=k.simpleClone(e),Object.keys(e).length>0&&(e=k.tidyShape(e,this.viewport,this.pid)),this.app.shape=e},serialize(){return this.rectangle.shapes().map(k.shape2tag)}}},M=N,V=(a("ef31"),a("2877")),P=Object(V["a"])(M,w,y,!1,null,"6d512471",null),D=P.exports,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uploader-container"},[a("form",{staticClass:"box advance",class:{"is-dragover":e.isDragover},attrs:{method:"post",action:"",enctype:"multipart/form-data",novalidate:""}},[a("div",{staticClass:"input-box"},[a("svg",{staticClass:"upload-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"43",viewBox:"0 0 50 43"}},[a("path",{attrs:{d:"M48.4 26.5c-.9 0-1.7.7-1.7 1.7v11.6h-43.3v-11.6c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v13.2c0 .9.7 1.7 1.7 1.7h46.7c.9 0 1.7-.7 1.7-1.7v-13.2c0-1-.7-1.7-1.7-1.7zm-24.5 6.1c.3.3.8.5 1.2.5.4 0 .9-.2 1.2-.5l10-11.6c.7-.7.7-1.7 0-2.4s-1.7-.7-2.4 0l-7.1 8.3v-25.3c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v25.3l-7.1-8.3c-.7-.7-1.7-.7-2.4 0s-.7 1.7 0 2.4l10 11.6z"}})]),a("input",{ref:"file",staticClass:"input-file",attrs:{type:"file",name:"files[]",id:"file","data-multiple-caption":"{count} files selected"}}),e._m(0)])])])},L=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"file"}},[a("strong",[e._v("Choose a file")]),a("span",{staticClass:"dragndrop-text"},[e._v(" or drag it here")]),e._v(".")])}],I={data(){return{isDragover:!1}},mounted(){this.bindEvent()},methods:{bindEvent(){const e=["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"],t=["dragover","dragenter"],a=["dragleave","dragend","drop"],s=e=>{e.preventDefault(),e.stopPropagation()},i=e=>{this.isDragover=!0},n=e=>{this.isDragover=!1},r=e=>{if(e.length<=0)return;const t=Array.from(e).shift();if("application/pdf"!==t.type)return;const a=new FileReader;a.onload=()=>{this.$emit("pdf-loaded",a.result)},a.readAsArrayBuffer(t)},o=e=>{r(e.dataTransfer.files)},c=e=>{r(e.target.files)};e.forEach(e=>{this.$el.addEventListener(e,s)}),t.forEach(e=>{this.$el.addEventListener(e,i)}),a.forEach(e=>{this.$el.addEventListener(e,n)}),this.$el.addEventListener("drop",o),this.$refs.file.addEventListener("change",c),this.$once("hook:beforeDestroy",()=>{e.forEach(e=>{this.$el.removeEventListener(e,s)}),t.forEach(e=>{this.$el.removeEventListener(e,i)}),a.forEach(e=>{this.$el.removeEventListener(e,n)}),this.$el.removeEventListener("drop",o),this.$refs.file.removeEventListener("change",c)})}}},B=I,G=(a("6a43"),Object(V["a"])(B,U,L,!1,null,"2b7e45ca",null)),X=G.exports,Y=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},J=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"loader-wrapper"}},[a("div",{attrs:{id:"loader"}}),a("div",{staticClass:"loader-section section-left"}),a("div",{staticClass:"loader-section section-right"}),a("div",{staticClass:"load_title"})])}],z={},F=Object(V["a"])(z,Y,J,!1,null,null,null),H=F.exports,K={components:{RectCanvas:D,Uploader:X,FullLoading:H},data(){return{isRendering:!1,isUploaded:!1,pages:[]}},created(){this.app=this.$root.app(),this.watch()},mounted(){this.bindEvents()},methods:{watch(){this.$watch("app.exportCount",this.export),this.$watch("app.schema",this.exactTags,{deep:!1})},bindEvents(){const e=()=>{this.pages=this.pdfViewer.collect(),this.isRendering=!1};document.addEventListener("pagesRenderCompleted",e),this.$once("hook:beforeDestroy",()=>{document.removeEventListener("pagesRenderCompleted",e)})},onPdfLoaded(e){this.isRendering=!0,this.isUploaded=!0,window.pdfViewer=this.pdfViewer=m.instance({container:this.$refs.viewerContainer,textLayerMode:0}),this.pdfViewer.load({data:e})},onClose(){this.isRendering=!1,this.isUploaded=!1,this.pages=[]},serialize(){const e=this.$children.filter(e=>{return"RectCanvas"===e.$options.name}).flatMap(e=>{return e.serialize()}),t={},a={},s={};let i=0;return e.forEach(e=>{let n=!0;const{section:r}=e;if(delete e["section"],e.name=e.name||"tag".concat(++i),t[r]=t[r]||[],e.type.toLowerCase()===E.CHECKBOX){const{area:t,name:i}=e,o="".concat(r,"#").concat(i);s[o]=s[o]||0;const c=e.value||"ckb".concat(++s[o]);["area","value"].forEach(t=>delete e[t]),a[o]?(n=!1,a[o][c]=t):(e["areas"]=a[o]={},a[o][c]=t)}n&&t[r].push(e)}),t},export(e,t){const a=k.simpleClone(this.app.schema),s=this.serialize();a.sections=a.sections||{},Object.entries(s).forEach(e=>{const[t,s]=e;a.sections[t]=a.sections[t]||{},a.sections[t].tags=s});var i=new Blob([JSON.stringify(a,null,2)],{type:"text/plain;charset=utf-8"});h.a.saveAs(i,this.app.filename)},exactTags(e,t){const a=e.sections||{},s={};Object.entries(a).forEach(e=>{const[t,a]=e,i=Number.parseInt(a.tplIdx||t.replace(/-.*/g,"").replace(/\D/g,""));Number.isNaN(i)||(s[i]=s[i]||[],s[i].push([t,a.tags||[]]))}),this.pages.forEach(e=>{const t=e.id;s[t]&&(e.sections=s[t])})}}},q=K,W=(a("55b5"),Object(V["a"])(q,c,p,!1,null,null,null)),Q=W.exports,Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"8px 12px"}},[a("v-card",{staticStyle:{position:"relative"},attrs:{outlined:""}},[a("v-btn",{staticStyle:{position:"absolute",right:"0"},attrs:{icon:""},on:{click:function(t){return e.copy()}}},[a("v-icon",[e._v("mdi-content-copy")])],1),a("v-card-text",[a("pre",{staticClass:"code"},[e._v(e._s(e.result))])])],1),a("v-form",{ref:"form"},[a("v-text-field",{attrs:{label:"Section",type:"text",dense:""},model:{value:e.app.shape.section,callback:function(t){e.$set(e.app.shape,"section",t)},expression:"app.shape.section"}}),a("v-select",{attrs:{items:e.tagTypes,label:"Type"},model:{value:e.app.shape.type,callback:function(t){e.$set(e.app.shape,"type",t)},expression:"app.shape.type"}}),a("v-select",{directives:[{name:"show",rawName:"v-show",value:e.app.shape.type===e.TAG_TYPE.SIGNATURE,expression:"app.shape.type === TAG_TYPE.SIGNATURE"}],attrs:{items:e.signatureTypes,label:"Signature Type"},model:{value:e.app.shape.signatureType,callback:function(t){e.$set(e.app.shape,"signatureType",t)},expression:"app.shape.signatureType"}}),a("v-text-field",{directives:[{name:"show",rawName:"v-show",value:e.app.shape.type===e.TAG_TYPE.SIGNATURE,expression:"app.shape.type === TAG_TYPE.SIGNATURE"}],attrs:{label:"Scale Value",type:"text",dense:""},model:{value:e.app.shape.scaleValue,callback:function(t){e.$set(e.app.shape,"scaleValue",e._n(t))},expression:"app.shape.scaleValue"}}),a("v-text-field",{attrs:{label:"Name",type:"text",dense:""},model:{value:e.app.shape.name,callback:function(t){e.$set(e.app.shape,"name","string"===typeof t?t.trim():t)},expression:"app.shape.name"}}),a("v-text-field",{directives:[{name:"show",rawName:"v-show",value:e.app.shape.type===e.TAG_TYPE.CHECKBOX,expression:"app.shape.type === TAG_TYPE.CHECKBOX"}],attrs:{label:"Value",type:"text",dense:""},model:{value:e.app.shape.value,callback:function(t){e.$set(e.app.shape,"value","string"===typeof t?t.trim():t)},expression:"app.shape.value"}}),a("v-text-field",{attrs:{label:"Left",type:"number",dense:""},model:{value:e.app.shape.left,callback:function(t){e.$set(e.app.shape,"left",e._n(t))},expression:"app.shape.left"}}),a("v-text-field",{attrs:{label:"Top",type:"number",dense:""},model:{value:e.app.shape.top,callback:function(t){e.$set(e.app.shape,"top",e._n(t))},expression:"app.shape.top"}}),a("v-text-field",{attrs:{label:"Width",type:"number",dense:""},model:{value:e.app.shape.width,callback:function(t){e.$set(e.app.shape,"width",e._n(t))},expression:"app.shape.width"}}),a("v-text-field",{attrs:{label:"Height",type:"number",dense:""},model:{value:e.app.shape.height,callback:function(t){e.$set(e.app.shape,"height",e._n(t))},expression:"app.shape.height"}})],1)],1)},ee=[],te={data:()=>({tagTypes:Object.values(E),signatureTypes:Object.values(x)}),created(){this.app=this.$root.app(),this.TAG_TYPE=E},computed:{result(){if(Number.isNaN(Number.parseInt(this.app.shape.left)))return"";const e=k.shape2tag(this.app.shape);return["section"].forEach(t=>delete e[t]),e}},methods:{copy(){this.$copyText(JSON.stringify(this.result))}}},ae=te,se=(a("50ce"),a("6544")),ie=a.n(se),ne=a("8336"),re=a("b0af"),oe=a("99d9"),ce=a("4bd4"),pe=a("132d"),le=a("b974"),he=a("8654"),de=Object(V["a"])(ae,Z,ee,!1,null,"2aab10b3",null),ue=de.exports;ie()(de,{VBtn:ne["a"],VCard:re["a"],VCardText:oe["a"],VForm:ce["a"],VIcon:pe["a"],VSelect:le["a"],VTextField:he["a"]});var ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-btn",{staticStyle:{cursor:"pointer"},attrs:{icon:"",tag:"label",for:"import"}},[a("v-icon",[e._v("mdi-file-import")]),a("input",{ref:"import",staticClass:"input-file",attrs:{type:"file",id:"import"}})],1)},fe=[],ge={created(){this.app=this.$root.app()},mounted(){this.bindEvent()},methods:{bindEvent(){const e=e=>{if(e.target.files.length<=0)return;e.preventDefault(),e.stopPropagation();const t=Array.from(e.target.files).shift(),a=new FileReader;a.onload=()=>{try{const e=JSON.parse(a.result);this.app.schema=e,this.app.filename=t.name}catch(e){console.error("JSON parsed error.")}},a.readAsText(t)};this.$refs.import.addEventListener("change",e),this.$once("hook:beforeDestroy",()=>{this.$refs.import.removeEventListener("change",e)})}}},be=ge,me=(a("6e7b"),Object(V["a"])(be,ve,fe,!1,null,"6261e4f2",null)),we=me.exports;ie()(me,{VBtn:ne["a"],VIcon:pe["a"]});var ye={name:"App",components:{Viewer:Q,Outline:ue,Import:we},data:()=>({drawer:null,shape:{},schema:{},exportCount:0,filename:"export.json"}),created(){this.$root.app=()=>{return this.$root.$children[0]},this.$vuetify.theme.dark=!0}},Ee=ye,xe=a("7496"),Ce=a("40dc"),Oe=a("62ad"),Te=a("a523"),je=a("a75b"),_e=a("f774"),Ae=a("0fd9"),Re=a("2fa4"),Se=a("2a7f"),$e=Object(V["a"])(Ee,r,o,!1,null,null,null),ke=$e.exports;ie()($e,{VApp:xe["a"],VAppBar:Ce["a"],VBtn:ne["a"],VCol:Oe["a"],VContainer:Te["a"],VContent:je["a"],VIcon:pe["a"],VNavigationDrawer:_e["a"],VRow:Ae["a"],VSpacer:Re["a"],VToolbarTitle:Se["a"]});var Ne=a("f309");s["a"].use(Ne["a"]);var Me=new Ne["a"]({}),Ve=a("2fa7");class Pe extends d["fabric"].Rect{constructor(...e){super(...e),Object(Ve["a"])(this,"_shape",{section:"",name:"",type:E.TEXT,value:"",signatureType:x.SIGNATURE,scaleValue:1})}get shape(){const{left:e,top:t,width:a,height:s}=this;return Object.assign(this._shape,{left:e,top:t,width:a,height:s})}set shape(e){const{left:t,top:a,width:s,height:i}=e;this._shape=e,this.set({left:t,top:a,width:s,height:i}),this.setCoords()}}d["fabric"].Rect=Pe,s["a"].config.productionTip=!1,s["a"].use(n.a),new s["a"]({vuetify:Me,render:e=>e(ke)}).$mount("#app")},"57b0":function(e,t,a){},6:function(e,t){},"6a43":function(e,t,a){"use strict";var s=a("40a2"),i=a.n(s);i.a},"6e7b":function(e,t,a){"use strict";var s=a("dc72"),i=a.n(s);i.a},7:function(e,t){},"79dc":function(e,t,a){},"9cf4":function(e,t,a){},dc72:function(e,t,a){},ef31:function(e,t,a){"use strict";var s=a("79dc"),i=a.n(s);i.a}});
//# sourceMappingURL=app.c5417d59.js.map